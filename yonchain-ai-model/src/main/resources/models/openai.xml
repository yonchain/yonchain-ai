<?xml version="1.0" encoding="UTF-8" ?>
<models namespace="openai" factory="com.yonchain.ai.model.factory.impl.OpenAIModelFactory">

    <!-- 命名空间级默认Handler -->
    <defaultHandlers>
        <handler type="chat" class="com.yonchain.ai.model.options.openai.OpenAiChatOptionsHandler"/>
        <handler type="image" class="com.yonchain.ai.model.options.openai.OpenAiImageOptionsHandler"/>
        <handler type="embedding" class="com.yonchain.ai.model.options.openai.OpenAiEmbeddingOptionsHandler"/>
    </defaultHandlers>

    <!-- 聊天模型 -->
    <model id="gpt-4" type="chat">
        <baseUrl>https://api.openai.com</baseUrl>
        <completionsPath>/v1/chat/completions</completionsPath>
        <auth type="bearer">${openai.apiKey}</auth>
        <options>
            <model>gpt-4</model>
            <temperature>0.7</temperature>
            <maxTokens>4096</maxTokens>
            <topP>1.0</topP>
            <frequencyPenalty>0.0</frequencyPenalty>
            <presencePenalty>0.0</presencePenalty>
            <n>1</n>
            <seed>42</seed>
            <user>yonchain-ai</user>
        </options>
    </model>
    
    <model id="gpt-3.5-turbo" type="chat">
        <baseUrl>https://api.openai.com</baseUrl>
        <completionsPath>/v1/chat/completions</completionsPath>
        <auth type="bearer">${openai.apiKey}</auth>
        <options>
            <model>gpt-3.5-turbo</model>
            <temperature>0.7</temperature>
            <maxTokens>2048</maxTokens>
        </options>
    </model>
    
    <!-- 图像生成模型 -->
    <model id="dall-e-3" type="image">
        <baseUrl>https://api.openai.com/v1/images/generations</baseUrl>
        <auth type="bearer">${openai.apiKey}</auth>
        <options>
            <model>dall-e-3</model>
            <size>1024x1024</size>
            <quality>standard</quality>
            <n>1</n>
            <responseFormat>url</responseFormat>
            <style>vivid</style>
            <user>yonchain-ai</user>
        </options>
    </model>
    
    <!-- 嵌入模型 -->
    <model id="text-embedding-ada-002" type="embedding">
        <baseUrl>https://api.openai.com/v1/embeddings</baseUrl>
        <auth type="bearer">${openai.apiKey}</auth>
        <options>
            <model>text-embedding-ada-002</model>
            <encodingFormat>float</encodingFormat>
            <user>yonchain-ai</user>
        </options>
    </model>
    
    <!-- 新一代嵌入模型，支持维度设置 -->
    <model id="text-embedding-3-small" type="embedding">
        <baseUrl>https://api.openai.com/v1/embeddings</baseUrl>
        <auth type="bearer">${openai.apiKey}</auth>
        <options>
            <model>text-embedding-3-small</model>
            <encodingFormat>float</encodingFormat>
            <dimensions>1536</dimensions>
            <user>yonchain-ai</user>
        </options>
    </model>
</models>