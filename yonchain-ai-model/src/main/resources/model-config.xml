<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <!-- 全局配置 -->
    <settings>
        <setting name="cache.enabled" value="true"/>
        <setting name="default.timeout" value="30"/>
        <setting name="openai.compatibility.enabled" value="true"/>
        <setting name="enable.metrics" value="true"/>
    </settings>
    
    <!-- 环境变量/占位符（可选） -->
    <environments default="dev">
        <environment id="dev">
            <properties>
                <property name="openai.apiKey" value="${OPENAI_API_KEY}"/>
                <property name="openai.baseUrl" value="https://api.openai.com"/>
                <property name="deepseek.apiKey" value="sk-3ef709a6aa404b00af299c288264a48f"/>
                <property name="deepseek.baseUrl" value="https://api.deepseek.com"/>
            </properties>
        </environment>
        <environment id="prod">
            <properties>
                <property name="openai.apiKey" value="${OPENAI_API_KEY_PROD}"/>
                <property name="openai.baseUrl" value="https://api.openai.com"/>
                <property name="deepseek.apiKey" value="${DEEPSEEK_API_KEY_PROD}"/>
                <property name="deepseek.baseUrl" value="https://api.deepseek.com"/>
            </properties>
        </environment>
    </environments>
    
    <!-- 类型处理器配置 (可选的预注册，现在optionsHandler直接在模型中指定) -->
    <typeHandlers>
        <typeHandler handler="com.yonchain.ai.model.optionshandler.openai.OpenAiChatOptionsHandler"/>
        <typeHandler handler="com.yonchain.ai.model.optionshandler.openai.OpenAiImageOptionsHandler"/>
        <typeHandler handler="com.yonchain.ai.model.optionshandler.openai.OpenAiEmbeddingOptionsHandler"/>
        <typeHandler handler="com.yonchain.ai.model.optionshandler.deepseek.DeepSeekChatOptionsHandler"/>
    </typeHandlers>
    
    <!-- 模型配置文件扫描 -->
    <models>
        <resource path="classpath:models/openai.xml"/>
        <resource path="classpath:models/deepseek.xml"/>
        <resource path="classpath:models/business.xml"/>
    </models>
    
    <!-- 别名配置 -->
    <aliases>
        <alias name="default-chat" target="openai:gpt-4"/>
        <alias name="fast-chat" target="deepseek:deepseek-chat"/>
        <alias name="best-image" target="openai:dall-e-3"/>
        <alias name="cheap-chat" target="openai:gpt-3.5-turbo"/>
        <alias name="code-chat" target="deepseek:deepseek-coder"/>
    </aliases>
</configuration>
